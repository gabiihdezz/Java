package Ejercicios_Ficheros1;

import java.io.EOFException;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import FicherosTexto.Persona;

public class Ejercicio807 {

	public static void main(String[] args) throws IOException {
		/*807.- Crea un programa en Java que lea un fichero de datos numéricos enteros 
		(datos807.dat). Independientemente del número de datos numéricos enteros grabados, 
		solo se leerán y procesarán los 20 primeros. Estos se deben leer e introducir en un array 
		de 20 elementos enteros previamente declarado. Ordenar este array según uno de los 
		métodos de ordenación vistos y mostralo por pantalla. A continuación, grabar un nuevo 
		fichero: 
		Opción A) con los 20 elementos numéricos enteros en formato datos binarios. 
		Opción B) a través de serialización, grabando el objeto array.*/
		
			escribirObjeto();
			leerObjeto();
		}
		
		private static void escribirObjeto() throws IOException {
			int [] numeros= {23,33,42,13, 41, 10, 14, 34, 35,99, 12, 123, 54, 41 ,1, 44, 142, 88};
			
			File f = new File ("datos807.dat");
			
			FileOutputStream fo;
			
			fo = new FileOutputStream(f);
			
			ObjectOutputStream ooS = new ObjectOutputStream(fo);
			
			for(int i = 0; i<4; i++) {
				Ej807 p = new Ej807 (numeros[i]);
				ooS.writeObject(p);
			}
			
			ooS.close();
		}

		private static void leerObjeto() {
			File f = new File ("datos807.dat");
			FileInputStream fis;
			try {
			    fis = new FileInputStream("ficheroObjetos.dat");
			    ObjectInputStream ois = new ObjectInputStream(fis);
			    try {
			        while(true) {
			            Persona p = (Persona)ois.readObject();
			            System.out.println(p.toString());
			        }
			    }catch (EOFException e) {
			        System.out.println("Fin de fichero");
			    }catch (ClassNotFoundException e) {
			        // TODO Auto-generated catch block
			        e.printStackTrace();
			    }
			    ois.close();
			} catch (IOException e) {
			    // TODO Auto-generated catch block
			    e.printStackTrace();
			}
		
	}

}
